<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Roblox Smart Server Joiner</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <h2 id="status">Preparing to joinâ€¦</h2>
    <p>If nothing happens, make sure Roblox is installed.</p>

    <script>
        const params = new URLSearchParams(window.location.search);

        const placeId =
            params.get("placeId") || params.get("placeid");

        const gameInstanceId =
            params.get("gameInstanceId") || params.get("gameinstanceid");

        if (!placeId) {
            document.getElementById("status").innerText =
                "Error: Missing placeId";
            throw new Error("placeId required");
        }

        // ðŸ¶ Adopt Me placeId
        const ADOPT_ME_PLACE_ID = "920587237";

        function joinNormally() {
            document.getElementById("status").innerText =
                "Joining game normallyâ€¦";
            window.location.href =
                `roblox://experiences/start?placeId=${placeId}`;
        }

        function joinWithJobId() {
            document.getElementById("status").innerText =
                "Joining specific serverâ€¦";
            window.location.href =
                `roblox://experiences/start?placeId=${placeId}&gameInstanceId=${gameInstanceId}`;

            // â± fallback if server join fails
            setTimeout(() => {
                joinNormally();
            }, 4000);
        }

        // ðŸ§  DECISION LOGIC
        if (placeId === ADOPT_ME_PLACE_ID) {
            // ðŸš« Adopt Me blocks JobId joins
            joinNormally();
        } else if (gameInstanceId) {
            joinWithJobId();
        } else {
            joinNormally();
        }
    </script>
</body>
</html>
